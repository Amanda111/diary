<!DOCTYPE html><!--[if lte IE 8]>
<html lang="en" class="lte-ie8">
<![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en">
<!--<![endif]--><head><meta charset="utf-8"><title>November 11, 2017</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/diary/styles/global.css"><link rel="stylesheet" href="/diary/styles/tomorrow.css"><link rel="stylesheet" href="/diary/styles/diary.css"></head><body><header class="header"><div class="index"><a href="/diary/">Index</a></div><h1>November 11, 2017</h1></header><div class="content"><div class="diary"><h2 id="-">前端状态管理</h2>
<h3 id="-">为什么需要状态管理</h3>
<ul>
<li><p>状态管理的存在是为了更好地管理数据层的代码，同时使得数据和视图的关系更加清晰</p>
<blockquote>
<p>我们知道，同一个视图组件有可能对应多个model，同一个model可能会影响多个视图组件。引用状态管理，形成一个单向数据流。将之前放权到各个组件的修改数据层的 controller 代码收归一处，统一管理，组件需要修改数据层的话需要去触发特定的预先定义好的 dispatcher，然后 dispatcher 将 action 应用到 model 上，实现数据层的修改</p>
</blockquote>
</li>
<li><p>可以减少组件之间的耦合</p>
<blockquote>
<p>当数据是由父子组件通过props的方式传递的时候，组件之间就会产生耦合。随着项目越来越复杂，通过props的数据传递的方式会使得代码变得十分复杂，难以维护</p>
</blockquote>
</li>
</ul>
<h3 id="-">状态管理并不是真的“状态管理”</h3>
<p><strong>You are managing state? Think twice</strong> 这篇文章中提出，我们理解的Flux架构和经常用的Redux等等，并不是真的状态管理。它更像是 &quot;state container&quot; 来实现数据管理和数据流管理。文章设想一个了功能完整的登录注册UI组件，利用它来说明仅仅只有数据管理的不足。以及，真正的状态管理还需要管理状态和状态之间的关系。</p>
<h3 id="-">状态机</h3>
<p>状态机定义了所有状态和他们可能的输出情况。同时定义了如果传进不同的输入，对应的下一个状态分别是什么。</p>
<h3 id="-">为什么要使用状态机</h3>
<blockquote>
<ul>
<li>状态机模式免去了很多可能出现的 bug，因为它不会让 UI 变化为我们不知道的状态。</li>
<li>状态机不接受没有明确定义的输入作为当前的状态。这会免去我们对其它代码执行的部分容错处理。</li>
<li>状态机强制开发者以声明式的方式思考。因为我们大部分的逻辑需要提前定义</li>
</ul>
</blockquote>
<p>参考资料:</p>
<p><a href="https://zhuanlan.zhihu.com/p/25800767">浅谈前端状态管理</a></p>
<p><a href="http://krasimirtsonev.com/blog/article/managing-state-in-javascript-with-state-machines-stent">You are managing state? Think twice</a></p>
<p><a href="https://juejin.im/post/59fd94475188254115703461">前端状态管理请三思</a></p>
</div></div><footer class="footer"><address class="author">Copyright &copy;<a rel="author" href="https://github.com/Amanda111" class="author-name">Amanda</a>-<a href="https://github.com/Amanda111/my-tech-diary" class="source-repo">Source</a></address></footer></body></html>